<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Hi-e</title>
</head>
<body>
    <h1>메인페이지</h1>

    <!--로그인 된 유저에게만 보이는 문구들-->
    <div sec:authorize="hasRole('USER')">일반 회원만 볼 수 있습니다.</div>
    <p sec:authorize="isAuthenticated()" th:text="|${#authentication.name}님 로그인중|"></p>
    <p sec:authorize="isAuthenticated()" th:text="|${#authentication.principal.realname}님 로그인중|"></p>

    <!-- principal이 실제로 CustomUserDetails인지 확인하는 코드 -->
    <p th:text="${#authentication.principal.class.name}"></p>

    <div sec:authorize="hasRole('ADMIN')">관리자만 볼 수 있습니다.</div>

    <!-- 로그인 테스트용 thymeleaf -->
    <div sec:authorize="isAuthenticated()">
        로그인 됨
    </div>
    <div sec:authorize="isAnonymous()">
        로그인 안됨
    </div>

    <a th:href="@{/account/login}">로그인 하러가기</a>
</body>
</html>